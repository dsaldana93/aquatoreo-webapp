# nixpacks.toml - VERSIÃ“N CORREGIDA
name = "aquatoreo-webapp"

providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
    "npm install",
    "chmod +x node_modules/.bin/vite || echo 'Vite permissions fixed'",
    "chmod +x node_modules/.bin/* || echo 'All bin permissions fixed'"
]

[phases.build]
cmds = [
    "ls -la node_modules/.bin/vite",
    "node node_modules/vite/bin/vite.js build"
]

[static]
path = "dist"
singlePageApplication = true

[start]
cmd = "npx serve -s dist -l 3000"

[env]
NODE_ENV = "production"