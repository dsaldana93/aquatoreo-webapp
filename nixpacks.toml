# nixpacks.toml - SOLUCIÃ“N DEFINITIVA
name = "aquatoreo-webapp"

providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
    "npm install",
    "chmod -R 755 node_modules/.bin/ || true"
]

[phases.build]
cmds = [
    "ls -la node_modules/.bin/vite || echo 'Vite not found'",
    "which vite || echo 'Vite not in PATH'",
    "npx vite build"
]

[static]
path = "dist"
singlePageApplication = true

[start]
cmd = "npx serve -s dist -l 3000"

[env]
NODE_ENV = "production"